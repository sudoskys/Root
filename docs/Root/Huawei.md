# 华为

这节的教程主要参考酷安@某贼 [^41]

推荐直接看[知乎上他的文章](https://zhuanlan.zhihu.com/p/397173427)


## 解锁

**华为解锁 Bootloader 很困难**，**不推荐** 麒麟990以及更高的手机解锁，因为华为官方在 18年 就**关停**了官方获取解锁码通道，所以无法从官方拿解锁码，解锁过程困难且限制大。

华为通过解锁码解锁的Bootloader叫做用户Bootloader，只开放少数分区比如system，boot，recovery，userdata等。

工厂Bootloader则开放全分区，但需要第三方软件解锁（需要很多钱），而且只能在Fastboot里临时解锁，重启即失效。普通用户就只能解特供的用户Bootloader。

但是我们仍然可以选择通过第三方软件，淘宝商家获取解锁码或者手动拆机短接改解锁码。

!!! info
    注意，华为联发科无法解锁 Bootloader 的。

**拆机短接解锁深刷端口**


!!! danger
    1. 如果你选择了强解Bootloader,将不能更新系统。官方解锁可以正常OTA。

    2. 如果你没有拆机经验，建议找你附近的手机店帮拆一下，以免操作不当造成物理损坏。一般只需要拆后盖即可，但有几个机型还需要拆屏蔽罩，具体参考猎人短接图上的点位。

[华为解锁相关驱动与工具](https://miao202.lanzouj.com/igAzW09qew7e)

[解锁华为 bootloader 工具，适用 Kirin 960/95х/65x/620](https://github.com/mashed-potatoes/PotatoNV) ，如果不能下载请复制Github的 zip 链接请填入[镜像站](https://ghproxy.com/) 下载。[^42]

>猎人短接图使用方法：打开后在左下方搜索手机名称，比如荣耀9i就搜索9i即可,可能会搜索出两个结果，选择带 `TP` 字样的即可。

找到短接图后就可以按图短接了。一般是关机状态下短接再插线连电脑。**注意不要拆电池**。

其中有的图箭头指向两个触点，意思是用镊子短接这两个点。有的图是一个箭头，意思是用镊子一端接这个点，另一端悬空或接旁边的金属保护罩。有的图两个箭头分别指向触点和保护罩，意思是短接这个触点和保护罩。

电脑提前打开设备管理器，短接插线后注意观察电脑反应，如果成功的话电脑会有设备连接提示音并在设备管理器里刷新出华为麒麟深刷端口。

如果有提示音但显示未知设备USB-SER说明你没装驱动。

如果电脑没任何反应，你应该检查短接工具，数据线，电脑插口，手机是否关机状态，然后多短接几次试试。出端口之后就可以松手了。

不用看手机，注意端口就行，进入深刷后手机是黑屏无显示的。

**更改解锁码**

短接成功之后打开PotatoNV，第一项一般会被自动识别，在Bootloader一项里选你的处理器，通常情况下659选方案A即可。

点击 Start ，软件会随机生成一个16位解锁码显示在输出信息里。改好解锁码重启。

**华为**的解锁码是和硬件相关的，如果有解锁码进 FASTBOOOT 输入`fastboot oem unlock 解锁码`就可以了。



## 准备


**Data分区敏感**

华为喜欢把某些系统组件放到data里,请避免双清＆格式化data,执意操作会导致这些组件丢失，不能开机。如果你需要格式化，可以恢复官方的 Recovery 来格式化。如果格式化导致无法开机，可以提取官方包里的userdata分区，进入Fastboot用fastboot flash userdata 刷入来恢复。
    
华为这里很多TWRP不支持解密data，那就别解密了，插SD卡或者adb sideload刷包。

**救砖困难**

华为官方并没有给用户提供传统意义上的卡刷和线刷方式。一般是在升级模式用的（即所谓“三键强刷”包）华为官方包是.APP格式，由一堆分区镜像组合而成。

但是升级模式是官方 Rec 的一部分，刷包校验十分严格，包括华为签名（是否官方包），系统版本等等。升级模式无法满足救砖的需要。

!!! tip
    官方没有卡刷包。APP那个zip一般不能直接拿来卡刷。

如果使用Fastboot,借助第三方工具可以用APP包线刷，但是上面说了用户特供用户BL是没有解锁全部分区的，这将导致设备的分区大半无法刷入。实现全分区临时解锁除了借助第三方工具（moneymoney很多钱），唯一自己能操作的办法就是拆机短接。救砖教程请看下一节。

!!! info
    华为官方给用户提供的官方救砖途径是eRecovery恢复和Hisuite修复，但是华为封锁了这两条途径……
    这两个方法都是从官方服务器下载包然后恢复，但很多旧机型已经无法再从官方获取到包，也就无法再进行官方救砖。


**刷第三方包容易变砖**

包括官改移植类原生。

!!! info
    华为的EMUI9以上魔改了分区，修补boot没有什么用,需要刷入第三方 rec

### 华为各个模式

Recovery：不连接电脑，关机状态长按电源键和音量加，出现 logo 松开电源键继续按住音量加，直到进入。

eRecovery：关机状态,**数据传输线**连接电脑，长按电源键和音量加。

Fastboot：关机状态,**数据传输线**连接电脑，长按电源键和音量减。

升级模式（所谓三键强刷）：关机状态下，长按电源键，音量加和音量减。如果你的系统包在手机存储里，则不需要链接直接按，如果你想要用电脑工具辅助，则需要使用**数据传输线**连接电脑。

??? info "关于 Recovery 和 eRecovery"
    Recovery和eRecovery是有区别的。Recovery就是我们熟知的那个Recovery，而eRecovery是独立于Recovery的另一个分区。二者功能不同，在Recovery里我们可以做恢复出厂，清除cache等本地操作，而在eRecovery里可以连接WiFi下载适用于你的手机的系统包并自动安装恢复。刷TWRP只是替换掉了Recovery，eRecovery仍然保留。



具体过程你需要读[这篇文档](https://zhuanlan.zhihu.com/p/435008942)

去年华为关闭了官网上的ROM下载通道，你可以去万维论坛或者 [Huawei Firm Finder](https://professorjtj.github.io/)


## 扼要

需要解锁 Bootloader 。

!!! danger
    如果你选择了强解Bl,将不能更新系统。官方解锁可以正常OTA。

**拆机短接解锁深刷端口**

!!! danger
    如果你没有拆机经验，建议找你附近的手机店帮拆一下，以免操作不当造成物理损坏。一般只需要拆后盖即可，但有几个机型还需要拆屏蔽罩，具体参考猎人短接图上的点位。


>猎人短接图使用方法：打开后在左下方搜索手机名称，比如荣耀9i就搜索9i即可,可能会搜索出两个结果，选择带 `TP` 字样的即可。

找到短接图后就可以按图短接了。一般是关机状态下短接再插线连电脑。**注意不要拆电池**。

其中有的图箭头指向两个触点，意思是用镊子短接这两个点。有的图是一个箭头，意思是用镊子一端接这个点，另一端悬空或接旁边的金属保护罩。有的图两个箭头分别指向触点和保护罩，意思是短接这个触点和保护罩。


电脑提前打开设备管理器，短接插线后注意观察电脑反应，如果成功的话电脑会有设备连接提示音并在设备管理器里刷新出华为麒麟深刷端口。

如果有提示音但显示未知设备USB-SER说明你没装驱动。

如果电脑没任何反应，你应该检查短接工具，数据线，电脑插口，手机是否关机状态，然后多短接几次试试。出端口之后就可以松手了。

不用看手机，注意端口就行，进入深刷后手机是黑屏无显示的。

**更改解锁码**

短接成功之后打开PotatoNV，第一项一般会被自动识别，在Bootloader一项里选你的处理器，通常情况下659选方案A即可。

点击 Start ，软件会随机生成一个16位解锁码显示在输出信息里。改好解锁码重启。

**华为**的解锁码是和硬件相关的，如果有解锁码进 FASTBOOOT 输入`fastboot oem unlock 解锁码`就可以了。

